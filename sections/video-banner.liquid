<section class="video-hero">
  <div class="video-hero__wrapper">
    {% if section.settings.youtube_url != blank %}
      <div class="video-hero__video desktop-only">
        <iframe 
          src="https://www.youtube.com/embed/{{ section.settings.youtube_url | split: 'v=' | last }}?autoplay=1&mute=1&loop=1&playlist={{ section.settings.youtube_url | split: 'v=' | last }}&controls=0&showinfo=0&modestbranding=1&rel=0"
          frameborder="0"
          allow="autoplay; fullscreen; encrypted-media"
          allowfullscreen
        ></iframe>
      </div>
    {% endif %}

    {% if section.settings.fallback_image != blank %}
      <img 
        class="video-hero__fallback mobile-only"
        src="{{ section.settings.fallback_image | img_url: 'master' }}"
        alt="Hero Background"
        loading="lazy"
      >
    {% endif %}

    <div class="video-hero__content">
      {% if section.settings.heading != blank %}
        <h1>{{ section.settings.heading }}</h1>
      {% endif %}
      {% if section.settings.cta_label != blank %}
        <a href="{{ section.settings.cta_link }}" class="video-hero__btn">
          {{ section.settings.cta_label }}
        </a>
      {% endif %}
    </div>
  </div>
  
  <style>
    .video-hero {
      position: relative;
      width: 100%;
      height: {{ section.settings.desktop_height }}px;
      overflow: hidden;
    }
    .video-hero__video iframe {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    .video-hero__fallback {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      top: 0;
      left: 0;
    }
    .desktop-only { display: block; }
    .mobile-only { display: none; }
    @media(max-width: 767px){
      .desktop-only { display: none; }
      .mobile-only { display: block; }
      .video-hero {
        height: {{ section.settings.mobile_height }}px;
      }
    }
    .video-hero__content {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }
    .video-hero__btn {
      margin-top: 20px;
      background: {{ section.settings.button_bg }};
      color: {{ section.settings.button_color }};
      padding: {{ section.settings.padding_vertical }}px {{ section.settings.padding_horizontal }}px;
      border-radius: {{ section.settings.button_radius }}px;
      font-size: {{ section.settings.button_font_size }}px;
      text-decoration: none;
      transition: 0.3s ease;
    }
    .video-hero__btn:hover {
      background: {{ section.settings.button_hover_bg }};
      color: {{ section.settings.button_hover_color }};
    }
  </style>
  
  {% schema %}
  {
    "name": "Video Banner",
    "settings": [
      {
        "type": "text",
        "id": "youtube_url",
        "label": "YouTube Video URL"
      },
      {
        "type": "image_picker",
        "id": "fallback_image",
        "label": "Fallback Image (mobile)"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Your Hero Title"
      },
      {
        "type": "text",
        "id": "cta_label",
        "label": "CTA Button Label",
        "default": "Shop Now"
      },
      {
        "type": "url",
        "id": "cta_link",
        "label": "CTA Button Link"
      },
      {
      "type": "range",
      "id": "padding_vertical",
      "label": "Button Padding Vertical (px)",
      "min": 5,
      "max": 30,
      "step": 1,
      "default": 12
      },
      {
        "type": "range",
        "id": "padding_horizontal",
        "label": "Button Padding Horizontal (px)",
        "min": 10,
        "max": 50,
        "step": 1,
        "default": 25
      },
      {
        "type": "range",
        "id": "button_radius",
        "min": 0,
        "max": 50,
        "step": 1,
        "unit": "px",
        "label": "Button Border Radius",
        "default": 8
      },
      {
        "type": "range",
        "id": "button_font_size",
        "min": 10,
        "max": 30,
        "step": 1,
        "unit": "px",
        "label": "Button Font Size",
        "default": 16
      },
      {
        "type": "color",
        "id": "button_bg",
        "label": "Button Background Color",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "button_color",
        "label": "Button Text Color",
        "default": "#ffffff"
      },
      {
        "type": "color",
        "id": "button_hover_bg",
        "label": "Button Hover Background Color",
        "default": "#333333"
      },
      {
        "type": "color",
        "id": "button_hover_color",
        "label": "Button Hover Text Color",
        "default": "#ffffff"
      },
      {
        "type": "range",
        "id": "desktop_height",
        "min": 200,
        "max": 900,
        "step": 10,
        "unit": "px",
        "label": "Desktop Section Height",
        "default": 600
      },
      {
        "type": "range",
        "id": "mobile_height",
        "min": 100,
        "max": 600,
        "step": 10,
        "unit": "px",
        "label": "Mobile Section Height",
        "default": 250
      }
    ],
    "presets": [
      {
        "name": "Video Banner",
        "category": "Custom"
      }
    ]
  }
  {% endschema %}
</section>
